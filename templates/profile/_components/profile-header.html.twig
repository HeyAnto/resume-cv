<div class="profile-header">
  <div class="profile-info">

    <img class="profile-img" src="{{ asset(profile.profilePictureUrl) }}"
      alt="Profile picture of {{ profile.displayName }}">

    <div class="info">
      <div class="flex flex-column">
        <div class="title">
          <h1 class="text-h1">
            {{ profile.displayName }}
          </h1>
          {% if profile.pronouns %}
          <p class="text-14 text-color-tertiary">
            {{ profile.pronouns }}
          </p>
          {% endif %}
        </div>
        <p class="text-16 text-color-tertiary">
          {{ profile.job }}{% if profile.location %} in {{ profile.location }}{% endif %}
        </p>
      </div>

      <div class="tag-list flex items-center gap-sm">
        {% if app.user and app.user.profile and app.user.profile != profile %}
        <form method="get" action="{{ path('app_profile_follow', {'username': username}) }}" style="display: inline;">
          <button type="submit"
            class="tag-follow btn-reset text-14{{ app.user.profile.isFollowing(profile) ? ' unfollow' : '' }}">
            {% if app.user.profile.isFollowing(profile) %}
            <span class="follow-text-default">Following</span>
            <span class="follow-text-hover">Unfollow</span>
            {% else %}
            Follow
            {% endif %}
          </button>
        </form>
        {% endif %}

        {% if profile.websiteName and profile.websiteLink %}
        <a class="tag-website text-14 text-color-secondary" href="{{ profile.websiteLink }}" target="_blank">
          {{ profile.websiteName }}
        </a>
        {% endif %}

        {% if 'ROLE_ADMIN' in profile.user.roles %}
        <div class="badge-container">
          {% include "_icons/admin-badge-fill.html.twig" with {'class': 'badge-icon admin'} %}
          <span class="badge-tooltip text-12">Admin</span>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  {% if profile.description %}
  <div class="flex flex-column">
    <h2 class="text-16">
      About
    </h2>
    <p class="text-body-16 text-color-tertiary">
      {{ profile.description }}
    </p>
  </div>
  {% endif %}

  <div class="resume-actions">
    <a class="btn-action {{ app.request.get('_route') == 'app_profile' ? 'active' : '' }} text-16"
      href="{{ path('app_profile', {'username': username}) }}">
      Resume
    </a>
    <a class="btn-action {{ app.request.get('_route') == 'app_profile_posts' ? 'active' : '' }} text-16"
      href="{{ path('app_profile_posts', {'username': username}) }}">
      Posts
    </a>
  </div>
</div>

{% if app.user.profile.username == username or is_granted('ROLE_ADMIN') %}
<div class="profile-edit-btn">
  {% if app.user.profile.username == username %}
  <a class="btn btn-primary-xs" href="{{ path('app_post_new', {'username': username}) }}">Post</a>
  {% endif %}
  <a href="{{ path('app_profile_edit', {'username': username}) }}" class="btn btn-secondary-xs">Edit Profile</a>

  {% if is_granted('ROLE_ADMIN') and app.user.profile.username != username %}
  <button class="btn btn-warning-xs admin-verify-btn hide" data-user-id="{{ profile.user.id }}"
    data-verified="{{ profile.user.isVerified ? 1 : 0 }}">
    {{ profile.user.isVerified ? 'Unverify' : 'Verify' }}
  </button>
  <button class="btn btn-danger-xs admin-delete-btn hide" data-username="{{ username }}">Delete Account</button>
  {% endif %}
</div>
{% endif %}