{% extends 'base.html.twig' %}

{% block importmap %}
{{ importmap(['app', 'character-counter', 'image-preview', 'image-modal']) }}
{% endblock %}

{% block title %}Profile Cooking â€” Resume.cv{% endblock %}

{% block main %}

{% include "_components/sidebar.html.twig" %}

{% include "/profile-edit/_components/edit-sidebar.html.twig" %}

<div class="main-content">
  {% include "_components/headers/header-logout.html.twig" %}

  <section class="section-profile-edit">
    <div class="container">

      <div>
        <h1 class="text-h1">{{ project ? 'Edit Project' : 'Create Project' }}</h1>
        <p class="text-16 text-color-tertiary">{{ project ? 'Update your project' : 'Add your project' }}</p>
      </div>

      {% for message in app.flashes('success') %}
      <div class="alert alert-success">
        {{ message }}
      </div>
      {% endfor %}

      {% for message in app.flashes('error') %}
      <div class="alert alert-danger">
        {{ message }}
      </div>
      {% endfor %}

      {{ form_start(form) }}

      <div class="form-group">
        <div class="flex justify-between items-center">
          <label class="text-16 text-color-tertiary" for="{{ form.projectName.vars.id }}">{{
            form.projectName.vars.label }}*</label>
          <p class="text-14 text-color-tertiary" id="projectName-counter"></p>
        </div>
        {{ form_widget(form.projectName) }}
        <div class="text-14 text-color-red">{{ form_errors(form.projectName) }}</div>
      </div>

      <div class="form-group">
        <div class="flex justify-between items-center">
          <label class="text-16 text-color-tertiary" for="{{ form.projectLink.vars.id }}">{{
            form.projectLink.vars.label }}*</label>
          <p class="text-14 text-color-tertiary" id="projectLink-counter"></p>
        </div>
        {{ form_widget(form.projectLink) }}
        <div class="text-14 text-color-red">{{ form_errors(form.projectLink) }}</div>
      </div>

      <div class="form-group">
        <div class="flex justify-between items-center">
          <label class="text-16 text-color-tertiary" for="{{ form.description.vars.id }}">{{
            form.description.vars.label }}*</label>
          <p class="text-14 text-color-tertiary" id="description-counter"></p>
        </div>
        {{ form_widget(form.description) }}
        <div class="text-14 text-color-red">{{ form_errors(form.description) }}</div>
      </div>

      <div class="form-group">
        <div class="flex justify-between items-center">
          <label class="text-16 text-color-tertiary" for="{{ form.date.vars.id }}">{{
            form.date.vars.label }}*</label>
        </div>
        {{ form_widget(form.date) }}
        <div class="text-14 text-color-red">{{ form_errors(form.date) }}</div>
      </div>

      <div class="form-group">
        <label class="text-16 text-color-tertiary" for="{{ form.imagePath.vars.id }}">{{
          form.imagePath.vars.label }}</label>
        {{ form_widget(form.imagePath) }}
        <div class="text-14 text-color-red">{{ form_errors(form.imagePath) }}</div>
        <div id="image-preview-container-1">
          {% if project and project.imagePath %}
          <img src="{{ asset('uploads/projects/' ~ project.imagePath) }}" alt="Current project image 1"
            class="img-edit-postform post-img">
          {% endif %}
        </div>
      </div>

      <div class="form-group">
        <label class="text-16 text-color-tertiary" for="{{ form.imagePath2.vars.id }}">{{
          form.imagePath2.vars.label }}</label>
        {{ form_widget(form.imagePath2) }}
        <div class="text-14 text-color-red">{{ form_errors(form.imagePath2) }}</div>
        <div id="image-preview-container-2">
          {% if project and project.imagePath2 %}
          <img src="{{ asset('uploads/projects/' ~ project.imagePath2) }}" alt="Current project image 2"
            class="img-edit-postform post-img">
          {% endif %}
        </div>
      </div>

      <div class="form-group">
        <label class="text-16 text-color-tertiary" for="{{ form.imagePath3.vars.id }}">{{
          form.imagePath3.vars.label }}</label>
        {{ form_widget(form.imagePath3) }}
        <div class="text-14 text-color-red">{{ form_errors(form.imagePath3) }}</div>
        <div id="image-preview-container-3">
          {% if project and project.imagePath3 %}
          <img src="{{ asset('uploads/projects/' ~ project.imagePath3) }}" alt="Current project image 3"
            class="img-edit-postform post-img">
          {% endif %}
        </div>
      </div>

      {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary-xs full'}}) }}

      {{ form_end(form) }}

      {% if project %}
      <form action="{{ path('app_project_delete', {'username': username, 'id': project.id}) }}" method="post"
        style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this project?')">
        <div class="flex justify-end">
          <button type="submit" class="btn btn-secondary-xs danger full">Delete</button>
        </div>
      </form>
      {% endif %}

    </div>
  </section>
</div>

{% endblock %}